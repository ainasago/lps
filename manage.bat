@echo off
chcp 65001 >nul
title TTS é¡¹ç›®ç®¡ç†å·¥å…·

:MENU
cls
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘                    TTS é¡¹ç›®ç®¡ç†å·¥å…· v1.0                      â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo  ã€ç¼–è¯‘æž„å»ºã€‘
echo  [1] ç¼–è¯‘ API é¡¹ç›®
echo  [2] ç¼–è¯‘ Web é¡¹ç›®
echo  [3] ç¼–è¯‘æ‰€æœ‰é¡¹ç›®
echo.
echo  ã€å¼€å‘è¿è¡Œã€‘
echo  [4] å¯åŠ¨ APIï¼ˆå¼€å‘æ¨¡å¼ï¼‰
echo  [5] å¯åŠ¨ Webï¼ˆå¼€å‘æ¨¡å¼ï¼‰
echo  [6] å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
echo.
echo  ã€å‘å¸ƒéƒ¨ç½²ã€‘
echo  [7] å‘å¸ƒ APIï¼ˆReleaseï¼‰
echo  [8] å‘å¸ƒ Webï¼ˆRelease + JSæ··æ·†ï¼‰
echo  [9] å‘å¸ƒæ‰€æœ‰é¡¹ç›®ï¼ˆRelease + JSæ··æ·†ï¼‰
echo.
echo  ã€ç»´æŠ¤å·¥å…·ã€‘
echo  [A] æ¸…ç†ç¼–è¯‘æ–‡ä»¶
echo  [B] æ¢å¤ JS åŽŸæ–‡ä»¶
echo  [C] æµ‹è¯• JS æ··æ·†æ•ˆæžœ
echo  [D] æŸ¥çœ‹é¡¹ç›®ä¿¡æ¯
echo  [E] åˆ é™¤æ•°æ®åº“ï¼ˆé‡ç½®ï¼‰
echo.
echo  [0] é€€å‡º
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
set /p choice=è¯·é€‰æ‹©æ“ä½œ [0-9/A-E]: 

if "%choice%"=="1" goto BUILD_API
if "%choice%"=="2" goto BUILD_WEB
if "%choice%"=="3" goto BUILD_ALL
if "%choice%"=="4" goto RUN_API
if "%choice%"=="5" goto RUN_WEB
if "%choice%"=="6" goto RUN_ALL
if "%choice%"=="7" goto PUBLISH_API
if "%choice%"=="8" goto PUBLISH_WEB
if "%choice%"=="9" goto PUBLISH_ALL
if /i "%choice%"=="A" goto CLEAN
if /i "%choice%"=="B" goto RESTORE_JS
if /i "%choice%"=="C" goto TEST_OBFUSCATE
if /i "%choice%"=="D" goto INFO
if /i "%choice%"=="E" goto RESET_DB
if "%choice%"=="0" goto EXIT

echo.
echo âŒ æ— æ•ˆé€‰æ‹©ï¼Œè¯·é‡æ–°è¾“å…¥ï¼
timeout /t 2 >nul
goto MENU

REM ============================================================
REM ç¼–è¯‘æž„å»º
REM ============================================================

:BUILD_API
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  æ­£åœ¨ç¼–è¯‘ TtsWebApi...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
cd /d "%~dp0TtsWebApi"
dotnet build
if %errorlevel% equ 0 (
    echo.
    echo âœ… API ç¼–è¯‘æˆåŠŸï¼
) else (
    echo.
    echo âŒ API ç¼–è¯‘å¤±è´¥ï¼
)
echo.
pause
goto MENU

:BUILD_WEB
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  æ­£åœ¨ç¼–è¯‘ TtsWebApp...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
cd /d "%~dp0TtsWebApp"
dotnet build
if %errorlevel% equ 0 (
    echo.
    echo âœ… Web ç¼–è¯‘æˆåŠŸï¼
) else (
    echo.
    echo âŒ Web ç¼–è¯‘å¤±è´¥ï¼
)
echo.
pause
goto MENU

:BUILD_ALL
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  æ­£åœ¨ç¼–è¯‘æ‰€æœ‰é¡¹ç›®...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo [1/2] ç¼–è¯‘ TtsWebApi...
cd /d "%~dp0TtsWebApi"
dotnet build
if %errorlevel% neq 0 (
    echo âŒ API ç¼–è¯‘å¤±è´¥ï¼
    pause
    goto MENU
)
echo âœ… API ç¼–è¯‘æˆåŠŸï¼
echo.
echo [2/2] ç¼–è¯‘ TtsWebApp...
cd /d "%~dp0TtsWebApp"
dotnet build
if %errorlevel% neq 0 (
    echo âŒ Web ç¼–è¯‘å¤±è´¥ï¼
    pause
    goto MENU
)
echo âœ… Web ç¼–è¯‘æˆåŠŸï¼
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo âœ… æ‰€æœ‰é¡¹ç›®ç¼–è¯‘å®Œæˆï¼
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
pause
goto MENU

REM ============================================================
REM å¼€å‘è¿è¡Œ
REM ============================================================

:RUN_API
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  å¯åŠ¨ TtsWebApiï¼ˆå¼€å‘æ¨¡å¼ï¼‰...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
cd /d "%~dp0TtsWebApi"
start "TtsWebApi" cmd /k "dotnet run"
echo.
echo âœ… API æ­£åœ¨å¯åŠ¨...
echo ðŸ“ åœ°å€: http://localhost:5275
echo.
pause
goto MENU

:RUN_WEB
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  å¯åŠ¨ TtsWebAppï¼ˆå¼€å‘æ¨¡å¼ï¼‰...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
cd /d "%~dp0TtsWebApp"
start "TtsWebApp" cmd /k "dotnet run"
echo.
echo âœ… Web æ­£åœ¨å¯åŠ¨...
echo ðŸ“ åœ°å€: http://localhost:5261
echo.
pause
goto MENU

:RUN_ALL
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆå¼€å‘æ¨¡å¼ï¼‰...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo [1/2] å¯åŠ¨ TtsWebApi...
cd /d "%~dp0TtsWebApi"
start "TtsWebApi" cmd /k "dotnet run"
echo âœ… API æ­£åœ¨å¯åŠ¨...
echo.
echo [2/2] å¯åŠ¨ TtsWebApp...
cd /d "%~dp0TtsWebApp"
start "TtsWebApp" cmd /k "dotnet run"
echo âœ… Web æ­£åœ¨å¯åŠ¨...
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo âœ… æ‰€æœ‰æœåŠ¡æ­£åœ¨å¯åŠ¨...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ðŸ“ TtsWebApi: http://localhost:5275
echo ðŸ“ TtsWebApp: http://localhost:5261
echo.
pause
goto MENU

REM ============================================================
REM å‘å¸ƒéƒ¨ç½²
REM ============================================================

:PUBLISH_API
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  å‘å¸ƒ TtsWebApiï¼ˆReleaseï¼‰...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
cd /d "%~dp0TtsWebApi"
dotnet publish -c Release -o ./publish
if %errorlevel% equ 0 (
    echo.
    echo âœ… API å‘å¸ƒæˆåŠŸï¼
    echo ðŸ“ è¾“å‡ºç›®å½•: %~dp0TtsWebApi\publish
) else (
    echo.
    echo âŒ API å‘å¸ƒå¤±è´¥ï¼
)
echo.
pause
goto MENU

:PUBLISH_WEB
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  å‘å¸ƒ TtsWebAppï¼ˆRelease + JSæ··æ·†ï¼‰...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
cd /d "%~dp0TtsWebApp"

REM æ£€æŸ¥æ˜¯å¦å®‰è£…äº† Node.js
where node >nul 2>&1
if %errorlevel% neq 0 (
    echo âš ï¸  æœªæ£€æµ‹åˆ° Node.jsï¼Œè·³è¿‡ JS æ··æ·†...
    echo.
    dotnet publish -c Release -o ./publish
    goto PUBLISH_WEB_DONE
)

REM æ£€æŸ¥æ˜¯å¦å®‰è£…äº† npm ä¾èµ–
if not exist "node_modules" (
    echo ðŸ“¦ é¦–æ¬¡å‘å¸ƒï¼Œæ­£åœ¨å®‰è£… npm ä¾èµ–...
    call npm install
    if %errorlevel% neq 0 (
        echo âŒ npm ä¾èµ–å®‰è£…å¤±è´¥ï¼
        pause
        goto MENU
    )
)

echo.
echo [1/2] æ··æ·† JavaScript æ–‡ä»¶...
call npm run obfuscate:prod
if %errorlevel% neq 0 (
    echo âŒ JS æ··æ·†å¤±è´¥ï¼
    pause
    goto MENU
)
echo âœ… JS æ··æ·†å®Œæˆï¼

echo.
echo [2/2] å‘å¸ƒé¡¹ç›®...
dotnet publish -c Release -o ./publish
if %errorlevel% neq 0 (
    echo âŒ é¡¹ç›®å‘å¸ƒå¤±è´¥ï¼
    pause
    goto MENU
)

echo.
echo [3/3] æ¢å¤åŽŸå§‹ JS æ–‡ä»¶...
call npm run restore
echo âœ… åŽŸå§‹æ–‡ä»¶å·²æ¢å¤ï¼

:PUBLISH_WEB_DONE
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo âœ… Web å‘å¸ƒæˆåŠŸï¼
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo ðŸ“ è¾“å‡ºç›®å½•: %~dp0TtsWebApp\publish
echo ðŸ”’ JS æ–‡ä»¶å·²æ··æ·†ä¿æŠ¤
echo.
pause
goto MENU

:PUBLISH_ALL
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  å‘å¸ƒæ‰€æœ‰é¡¹ç›®ï¼ˆRelease + JSæ··æ·†ï¼‰...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚ [1/2] å‘å¸ƒ TtsWebApi...                                    â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
cd /d "%~dp0TtsWebApi"
dotnet publish -c Release -o ./publish
if %errorlevel% neq 0 (
    echo âŒ API å‘å¸ƒå¤±è´¥ï¼
    pause
    goto MENU
)
echo âœ… API å‘å¸ƒæˆåŠŸï¼

echo.
echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚ [2/2] å‘å¸ƒ TtsWebAppï¼ˆå« JS æ··æ·†ï¼‰...                     â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
cd /d "%~dp0TtsWebApp"

REM æ£€æŸ¥ Node.js
where node >nul 2>&1
if %errorlevel% neq 0 (
    echo âš ï¸  æœªæ£€æµ‹åˆ° Node.jsï¼Œè·³è¿‡ JS æ··æ·†...
    dotnet publish -c Release -o ./publish
    goto PUBLISH_ALL_DONE
)

REM å®‰è£…ä¾èµ–
if not exist "node_modules" (
    echo ðŸ“¦ å®‰è£… npm ä¾èµ–...
    call npm install
)

REM æ··æ·† JS
echo ðŸ”’ æ··æ·† JavaScript...
call npm run obfuscate:prod

REM å‘å¸ƒ
echo ðŸ“¦ å‘å¸ƒé¡¹ç›®...
dotnet publish -c Release -o ./publish

REM æ¢å¤åŽŸæ–‡ä»¶
echo ðŸ”„ æ¢å¤åŽŸå§‹æ–‡ä»¶...
call npm run restore

:PUBLISH_ALL_DONE
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo âœ… æ‰€æœ‰é¡¹ç›®å‘å¸ƒå®Œæˆï¼
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ðŸ“ API è¾“å‡º: %~dp0TtsWebApi\publish
echo ðŸ“ Web è¾“å‡º: %~dp0TtsWebApp\publish
echo ðŸ”’ JS æ–‡ä»¶å·²æ··æ·†ä¿æŠ¤
echo.
pause
goto MENU

REM ============================================================
REM ç»´æŠ¤å·¥å…·
REM ============================================================

:CLEAN
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  æ¸…ç†ç¼–è¯‘æ–‡ä»¶...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
set /p confirm=âš ï¸  ç¡®å®šè¦æ¸…ç†æ‰€æœ‰ç¼–è¯‘æ–‡ä»¶å—ï¼Ÿ(Y/N): 
if /i not "%confirm%"=="Y" goto MENU

echo.
echo æ¸…ç† TtsWebApi...
cd /d "%~dp0TtsWebApi"
if exist "bin" rd /s /q "bin"
if exist "obj" rd /s /q "obj"
if exist "publish" rd /s /q "publish"
echo âœ… API æ¸…ç†å®Œæˆ

echo.
echo æ¸…ç† TtsWebApp...
cd /d "%~dp0TtsWebApp"
if exist "bin" rd /s /q "bin"
if exist "obj" rd /s /q "obj"
if exist "publish" rd /s /q "publish"
if exist "wwwroot\js\obfuscated" rd /s /q "wwwroot\js\obfuscated"
if exist "wwwroot\js\backup" rd /s /q "wwwroot\js\backup"
echo âœ… Web æ¸…ç†å®Œæˆ

echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo âœ… æ¸…ç†å®Œæˆï¼
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
pause
goto MENU

:RESTORE_JS
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  æ¢å¤ JavaScript åŽŸæ–‡ä»¶...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
cd /d "%~dp0TtsWebApp"

if not exist "wwwroot\js\backup" (
    echo âš ï¸  æ²¡æœ‰æ‰¾åˆ°å¤‡ä»½æ–‡ä»¶ï¼
    pause
    goto MENU
)

where node >nul 2>&1
if %errorlevel% neq 0 (
    echo âŒ æœªæ£€æµ‹åˆ° Node.jsï¼
    pause
    goto MENU
)

call npm run restore
echo.
echo âœ… åŽŸå§‹æ–‡ä»¶å·²æ¢å¤ï¼
pause
goto MENU

:TEST_OBFUSCATE
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  æµ‹è¯• JavaScript æ··æ·†æ•ˆæžœ...
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
cd /d "%~dp0TtsWebApp"

where node >nul 2>&1
if %errorlevel% neq 0 (
    echo âŒ æœªæ£€æµ‹åˆ° Node.jsï¼
    echo ðŸ“¥ è¯·å…ˆå®‰è£… Node.js: https://nodejs.org/
    pause
    goto MENU
)

if not exist "node_modules" (
    echo ðŸ“¦ é¦–æ¬¡ä½¿ç”¨ï¼Œæ­£åœ¨å®‰è£… npm ä¾èµ–...
    call npm install
)

echo.
call npm run obfuscate
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo âœ… æ··æ·†æµ‹è¯•å®Œæˆï¼
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo ðŸ“ æ··æ·†æ–‡ä»¶ä½ç½®: wwwroot\js\obfuscated\
echo ðŸ’¡ æç¤º: åŽŸæ–‡ä»¶æœªè¢«ä¿®æ”¹ï¼Œå¯ä»¥å®‰å…¨æŸ¥çœ‹æ··æ·†æ•ˆæžœ
echo.
pause
goto MENU

:INFO
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  é¡¹ç›®ä¿¡æ¯
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ðŸ“¦ é¡¹ç›®åç§°: TTS è¯­éŸ³è½¬æ¢ç³»ç»Ÿ
echo ðŸ“‚ é¡¹ç›®è·¯å¾„: %~dp0
echo.
echo â”Œâ”€ TtsWebApi â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
cd /d "%~dp0TtsWebApi"
if exist "TtsWebApi.csproj" (
    echo â”‚ âœ… é¡¹ç›®å­˜åœ¨
    echo â”‚ ðŸ“ å¼€å‘åœ°å€: http://localhost:5275
    echo â”‚ ðŸ“ é¡¹ç›®è·¯å¾„: %~dp0TtsWebApi
) else (
    echo â”‚ âŒ é¡¹ç›®ä¸å­˜åœ¨
)
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo â”Œâ”€ TtsWebApp â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
cd /d "%~dp0TtsWebApp"
if exist "TtsWebApp.csproj" (
    echo â”‚ âœ… é¡¹ç›®å­˜åœ¨
    echo â”‚ ðŸ“ å¼€å‘åœ°å€: http://localhost:5261
    echo â”‚ ðŸ“ é¡¹ç›®è·¯å¾„: %~dp0TtsWebApp
    
    REM æ£€æŸ¥æ•°æ®åº“
    if exist "tts_admin.db" (
        echo â”‚ ðŸ’¾ æ•°æ®åº“: å·²åˆ›å»º
    ) else (
        echo â”‚ ðŸ’¾ æ•°æ®åº“: æœªåˆ›å»º
    )
    
    REM æ£€æŸ¥ Node.js
    where node >nul 2>&1
    if %errorlevel% equ 0 (
        echo â”‚ ðŸŸ¢ Node.js: å·²å®‰è£…
        if exist "node_modules" (
            echo â”‚ ðŸ“¦ npm ä¾èµ–: å·²å®‰è£…
        ) else (
            echo â”‚ ðŸ“¦ npm ä¾èµ–: æœªå®‰è£…
        )
    ) else (
        echo â”‚ ðŸ”´ Node.js: æœªå®‰è£…
    )
) else (
    echo â”‚ âŒ é¡¹ç›®ä¸å­˜åœ¨
)
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
pause
goto MENU

:RESET_DB
cls
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo  é‡ç½®æ•°æ®åº“
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo âš ï¸  è­¦å‘Š: æ­¤æ“ä½œå°†åˆ é™¤æ‰€æœ‰æ•°æ®ï¼
echo.
set /p confirm=ç¡®å®šè¦é‡ç½®æ•°æ®åº“å—ï¼Ÿ(Y/N): 
if /i not "%confirm%"=="Y" goto MENU

cd /d "%~dp0TtsWebApp"
if exist "tts_admin.db" (
    del /f /q "tts_admin.db"
    echo âœ… æ•°æ®åº“å·²åˆ é™¤ï¼
    echo ðŸ’¡ ä¸‹æ¬¡å¯åŠ¨æ—¶å°†è‡ªåŠ¨åˆ›å»ºæ–°æ•°æ®åº“
) else (
    echo âš ï¸  æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨
)
echo.
pause
goto MENU

:EXIT
cls
echo.
echo ðŸ‘‹ æ„Ÿè°¢ä½¿ç”¨ TTS é¡¹ç›®ç®¡ç†å·¥å…·ï¼
echo.
timeout /t 2 >nul
exit
