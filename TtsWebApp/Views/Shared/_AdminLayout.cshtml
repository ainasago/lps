@inject IConfiguration Configuration
@using TtsWebApp.Services
@inject IConfigService ConfigService
@{
      var adminPath = Configuration["AppSettings:AdminPath"] ?? "admin3";
    ViewData["Title"] = ViewData["Title"] ?? "Home";
    var siteName = await ConfigService.GetConfigAsync("SiteName", "安妮语音转换");
    var siteNameEn = await ConfigService.GetConfigAsync("SiteNameEn", "Annie TTS");
    var contactEmail = await ConfigService.GetConfigAsync("ContactEmail", "contact@annietts.com");
    var siteDescription = await ConfigService.GetConfigAsync("SiteDescription", "免费在线AI文字转语音工具，支持多种语言和自然人声");
    var siteUrl = await ConfigService.GetConfigAsync("SiteUrl", "https://www.annietts.com");
}
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewData["Title"] - @siteName</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="@siteName - 免费在线AI文字转语音工具，支持多种语言和自然人声，为您的视频、播客和演示文稿创建高质量音频。" />
    <meta name="keywords" content="文字转语音,TTS,语音合成,AI配音,在线配音,免费TTS,中文配音,语音生成器" />
    <meta name="author" content="@siteName" />
    <meta name="robots" content="index, follow" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="@siteName - AI文字转语音工具" />
    <meta property="og:description" content="免费在线AI文字转语音工具，支持多种语言和自然人声" />
    <meta property="og:site_name" content="@siteName" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="@siteName - AI文字转语音工具" />
    <meta name="twitter:description" content="免费在线AI文字转语音工具，支持多种语言和自然人声" />
  
    <link rel="canonical" href="@siteUrl" />
    
    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Material Symbols -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- AdminLTE 4 (Bootstrap 5 compatible) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@4.0.0-beta2/dist/css/adminlte.min.css">
    <!-- Tailwind CSS (for page content) -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    
    <style>
        :root {
            --primary-color: rgb(17, 24, 39);
            --primary-hover: rgb(15, 23, 42);
            --secondary-color: rgb(30, 41, 59);
        }
        
        /* Sidebar Styling */
        .app-sidebar {
            background-color: var(--primary-color) !important;
        }
        
        .sidebar-brand .brand-link {
            background-color: rgba(0,0,0,0.1);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            color: white !important;
            padding: 0.8125rem 1rem;
            display: flex;
            align-items: center;
            text-decoration: none;
        }
        
        .sidebar-brand .brand-link:hover {
            background-color: rgba(0,0,0,0.15);
        }
        
        .sidebar-brand .brand-image {
            margin-right: 0.5rem;
            font-size: 1.5rem;
        }
        
        .sidebar-brand .brand-text {
            color: white;
        }
        
        .app-sidebar .nav-link {
            color: rgba(255,255,255,0.8) !important;
        }
        
        .app-sidebar .nav-link:hover {
            background-color: rgba(255,255,255,0.1) !important;
            color: white !important;
        }
        
        .app-sidebar .nav-link.active {
            background-color: rgba(255,255,255,0.2) !important;
            color: white !important;
        }
        
        .app-sidebar .nav-header {
            color: rgba(255,255,255,0.6) !important;
        }
        
        /* Button Styling */
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--primary-hover);
            border-color: var(--primary-hover);
        }
        
        /* Language Buttons */
        .lang-btn {
            padding: 0.25rem 0.75rem;
            margin: 0 0.25rem;
            border: 1px solid #dee2e6;
            background: transparent;
            color: inherit;
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .lang-btn:hover {
            background: rgba(0,0,0,0.05);
        }
        
        .lang-btn.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }
        
        /* Footer */
        .app-footer {
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
        }
        
        /* Ensure Tailwind works in content area */
        .app-content {
            /* Reset any conflicting styles */
        }
        
        /* Fix potential conflicts between Bootstrap and Tailwind */
        .app-content .grid {
            display: grid;
        }
        
        .app-content .flex {
            display: flex;
        }
        
        /* Ensure content area has proper background */
        .app-main {
            background-color: #f8f9fa;
        }
        
        /* Active menu item highlight */
        .app-sidebar .nav-link.active {
            background-color: rgba(255,255,255,0.2) !important;
        }
        
        /* Fix Tailwind hidden class */
        .hidden {
            display: none !important;
        }
        
        /* Override default link colors to gray-black theme */
        a {
            color: var(--primary-color);
        }
        
        a:hover {
            color: var(--primary-hover);
        }
        
        /* Card and button hover effects */
        .app-content .hover\:border-blue-500:hover {
            border-color: var(--primary-color) !important;
        }
        
        .app-content .hover\:bg-blue-50:hover {
            background-color: #ecf0f1 !important;
        }
        
        .app-content .text-blue-500,
        .app-content .text-blue-600 {
            color: var(--primary-color) !important;
        }
        
        .app-content .hover\:text-blue-700:hover {
            color: var(--primary-hover) !important;
        }
        
        .app-content .text-green-500,
        .app-content .text-green-600 {
            color: #5a6c7d !important;
        }
        
        .app-content .hover\:text-green-700:hover {
            color: var(--primary-hover) !important;
        }
        
        .app-content .text-purple-500,
        .app-content .text-purple-600 {
            color: #34495e !important;
        }
        
        .app-content .hover\:text-purple-700:hover {
            color: var(--primary-hover) !important;
        }
        
        .app-content .hover\:border-green-500:hover {
            border-color: #5a6c7d !important;
        }
        
        .app-content .hover\:bg-green-50:hover {
            background-color: #ecf0f1 !important;
        }
    </style>
    
    <script>
        // Tailwind configuration
        tailwind.config = {
            corePlugins: {
                preflight: false, // Disable Tailwind's base styles to avoid conflicts with Bootstrap
            },
            theme: {
                extend: {
                    colors: {
                        primary: '#2c3e50',
                        secondary: '#34495e',
                    }
                }
            }
        }
    </script>
</head>
<body class="layout-fixed sidebar-expand-lg bg-body-tertiary">
    <div class="app-wrapper">
        <!-- Navbar -->
        <nav class="app-header navbar navbar-expand bg-body">
            <div class="container-fluid">
                <!-- Left navbar links -->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" data-lte-toggle="sidebar" href="#" role="button">
                            <i class="fas fa-bars"></i>
                        </a>
                    </li>
                    <li class="nav-item d-none d-md-block">
                        <a asp-area="" asp-controller="Admin" asp-action="Index" class="nav-link" data-i18n="nav.home">
                            <i class="fas fa-home"></i> 首页
                        </a>
                    </li>
                    <li class="nav-item d-none d-md-block">
                        <a asp-area="" asp-controller="Admin" asp-action="Articles" class="nav-link">
                            <i class="fas fa-newspaper"></i> 文章
                        </a>
                    </li>
                </ul>

                <!-- Right navbar links -->
                <ul class="navbar-nav ms-auto">
                    <!-- Language Switcher -->
                    <li class="nav-item d-none d-sm-inline-block">
                        <div class="navbar-text">
                            <button data-lang="zh-CN" onclick="switchLanguage('zh-CN')" class="lang-btn" title="中文">中文</button>
                            <button data-lang="en-US" onclick="switchLanguage('en-US')" class="lang-btn" title="English">EN</button>
                        </div>
                    </li>
                    
                    <!-- Theme Toggle -->
                    <li class="nav-item">
                        <a class="nav-link" id="themeToggle" href="#" role="button" title="切换主题">
                            <i class="fas fa-moon"></i>
                        </a>
                    </li>
                    
                    <!-- Fullscreen Toggle -->
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-lte-toggle="fullscreen">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- /.navbar -->

        <!-- Main Sidebar Container -->
        <aside class="app-sidebar shadow" style="background-color: var(--primary-color);">
            <!-- Brand Logo -->
            <div class="sidebar-brand">
                <a href="/" class="brand-link">
                    <i class="fas fa-microphone-alt brand-image"></i>
                    <span class="brand-text fw-light">@siteName</span>
                </a>
            </div>
            
            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Sidebar Menu -->
                <nav class="mt-2">
                    <ul class="nav sidebar-menu flex-column" data-lte-toggle="treeview" role="menu" data-accordion="false">
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Admin" asp-action="Index" class="nav-link">
                                <i class="nav-icon fas fa-tachometer-alt"></i>
                                <p>仪表板</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Admin" asp-action="SiteConfig" class="nav-link">
                                <i class="nav-icon fas fa-cog"></i>
                                <p>网站配置</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Admin" asp-action="Articles" class="nav-link">
                                <i class="nav-icon fas fa-newspaper"></i>
                                <p>文章管理</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Admin" asp-action="Pages" class="nav-link">
                                <i class="nav-icon fas fa-file-alt"></i>
                                <p>页面管理</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="FileManager" asp-action="Index" class="nav-link">
                                <i class="nav-icon fas fa-folder-open"></i>
                                <p>文件管理</p>
                            </a>
                        </li>
                        <li class="nav-header">TTS 管理</li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Admin" asp-action="TtsRecords" class="nav-link">
                                <i class="nav-icon fas fa-microphone"></i>
                                <p>转换记录</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Admin" asp-action="TtsStatistics" class="nav-link">
                                <i class="nav-icon fas fa-chart-bar"></i>
                                <p>数据统计</p>
                            </a>
                        </li>
                        <li class="nav-header">系统设置</li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Admin" asp-action="AccountSettings" class="nav-link">
                                <i class="nav-icon fas fa-user-cog"></i>
                                <p>账户设置</p>
                            </a>
                        </li>
                        <li class="nav-header">其他</li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Tts" asp-action="Index" class="nav-link">
                                <i class="nav-icon fas fa-home"></i>
                                <p>返回首页</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <form asp-area="" asp-controller="Admin" asp-action="Logout" method="post" id="logoutForm">
                                <button type="submit" class="nav-link" style="background: none; border: none; width: 100%; text-align: left; padding: 0.5rem 1rem;">
                                    <i class="nav-icon fas fa-sign-out-alt"></i>
                                    <p>退出登录</p>
                                </button>
                            </form>
                        </li>
                    </ul>
                </nav>
                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->
        </aside>

        <!-- Content Wrapper -->
        <main class="app-main">

            <div class="app-content mt-3">
                <div class="container-fluid">
                    @RenderBody()
                </div>
            </div>
        </main>
        <!-- /.content-wrapper -->

        <!-- Main Footer -->
        <footer class="app-footer">
            <div class="float-end d-none d-sm-inline">
                <a href="/privacy" class="text-muted">隐私政策</a> |
                <a href="/terms" class="text-muted">服务条款</a>
            </div>
            <strong>Copyright &copy; 2025 <a href="/">@siteName</a>.</strong> 保留所有权利.
        </footer>
    </div>
    <!-- ./wrapper -->

    <!-- Bootstrap 5 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE 4 App -->
    <script src="https://cdn.jsdelivr.net/npm/admin-lte@4.0.0-beta2/dist/js/adminlte.min.js"></script>
    
    <!-- Custom Scripts -->
    <script src="~/js/i18n.js" asp-append-version="true"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    
    <script>
        // 主题切换功能
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('themeToggle');
            const html = document.documentElement;
            const body = document.body;
            
            // 从 localStorage 读取主题设置
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                body.classList.add('dark-mode');
                updateThemeIcon(true);
            }
            
            themeToggle?.addEventListener('click', function(e) {
                e.preventDefault();
                body.classList.toggle('dark-mode');
                const isDark = body.classList.contains('dark-mode');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                updateThemeIcon(isDark);
            });
            
            function updateThemeIcon(isDark) {
                const icon = themeToggle?.querySelector('i');
                if (icon) {
                    icon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
                }
            }
            
            // 语言按钮激活状态
            const currentLang = localStorage.getItem('language') || 'zh-CN';
            document.querySelectorAll('.lang-btn').forEach(btn => {
                if (btn.getAttribute('data-lang') === currentLang) {
                    btn.classList.add('active');
                }
            });
            
            // 高亮当前激活的菜单项
            const currentPath = window.location.pathname.toLowerCase();
            document.querySelectorAll('.sidebar-menu .nav-link').forEach(link => {
                const href = link.getAttribute('href');
                if (href && currentPath.includes(href.toLowerCase())) {
                    link.classList.add('active');
                }
            });
        });
        
        // 语言切换函数（如果还没有定义）
        if (typeof switchLanguage !== 'function') {
            function switchLanguage(lang) {
                localStorage.setItem('language', lang);
                document.querySelectorAll('.lang-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
                });
                // 触发语言切换事件
                if (typeof window.i18n !== 'undefined' && window.i18n.setLanguage) {
                    window.i18n.setLanguage(lang);
                }
            }
        }
    </script>
    
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
